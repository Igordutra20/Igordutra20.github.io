<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Confirmar E-mail</title>
</head>
<body style="background-color:#121212;color:white;text-align:center;padding:50px;">
  <h1>Confirmação de E-mail</h1>
  <p>Insira o código que foi enviado para o seu e-mail.</p>
  <input type="text" id="codigo" placeholder="Código de verificação"><br><br>
  <button onclick="confirmarCodigo()">Confirmar</button>
  <p id="mensagem" style="margin-top: 20px; color: red;"></p>

  <script>
    async function confirmarCodigo() {
      const email = localStorage.getItem('emailParaConfirmar');
      const codigo = document.getElementById('codigo').value;

      const resp = await fetch('https://enchanted-legends-back.onrender.com/api/confirmar', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ email, codigo })
      });

      const dados = await resp.json();

      if (resp.ok) {
        document.getElementById('mensagem').style.color = 'lime';
        document.getElementById('mensagem').innerText = 'E-mail confirmado com sucesso!';
      } else {
        document.getElementById('mensagem').innerText = dados.erro || 'Erro ao confirmar o código.';
      }
    }
  </script>
</body>
</html>
